# 星のカービィ ウルトラスーパーデラックス 練習用チートv2.0.0

## 導入方法

NDSForwarderを使っている場合は"usrcheat.dat"を"sd:/_nds/ntr-forwarder/usrcheat.dat"に配置  
既にある場合、変えたくなければr4cceで編集する  
ゲームを起動するときにYを押し続けるとメニューが表示される  
Xを押すと、チートが表示され、Aで選択、Xで保存して戻る  
STARTで保存して開始  
デフォルトで全て有効になってるからそれで良ければメニュー開く必要は無い  
TWiLight Menu++の場合は"sd:/_nds/TWiLightMenu/extras/usrcheat.dat"に配置  
ちなみにFTPDを使えば無線でファイルのやりとりができる

## 注意事項

メタナイトの逆襲のステージ最初のフロアはうまくQLできないから一度タイトルに戻って別のステージからQLする必要がある  
銀河のマルクは一度死んでからQSしたほうがいい

日本語版でしか使えない

## チート一覧

### QSQL

ポーズ中にLでQS  
ポーズ中にRで、QL時に曲が最初からになるQS  
セーブされるのは、フロア、座標、開始時の状態(ワープスターに乗ってきたかとか)、コピー能力、ヘルパー、両者のむてきキャンディ/メタクイック、銀河の取得済みのコピーのもとデラックス、銀河の下画面の能力の選択位置

ポーズ中にXで、ジェットをセーブ

プレイ中にLでロードされる  
そのモードでまだQSしてなかったらQSもされる

QL時にはタイマーのリセット、HP全回復、残機99、メタゴーのPt最大、洞窟の宝箱とボスのリセット、ダイナのスイッチ復活が行われる

格闘王系のモードではボスがセーブされ、QLすると1戦目になってそのボスがロードされる  
Rを押しながらLで次の戦闘に進める

マキシムトマト、むてきキャンディ、1UPなどの、ステージを出ないと復活しないアイテムがフロア遷移で復活するようになる

フロア遷移時のタイムをスコア・ゴールドに表示する  
ボス戦でも表示され続ける

### R + START to Pause Anytime

RとSTARTを押すと、はるかぜのステージ冒頭のムービー中とかワープスターに乗ってるときでもポーズできる

### R + SELECT to Die

RとSELECTを押すと死ぬ

### Freeze RoMK Timer

これは自分で作ったんじゃなくてネットで拾ってきたやつ  
メタナイトの逆襲のタイマーが減らなくなる

## どうやって作ったか

C言語で書いたコードをARMv5向けにコンパイルして出来たELFファイルをdesmumeでconvert-to-AR.luaを使っていい感じに変換する  
組み込みとか全然詳しくなくて調べてもよく分からなかったからELFファイルのバイナリ見て変換方法考えるっていう無理やりな方法をした

コードはRAMの023FE000に配置した  
DSATM(DS Auto Trainer Maker)っていう、ROMにチートを埋め込めるアプリがあるんだけど、チート機能がコピーされる場所のデフォルトがそこでほとんどのゲームでは問題ないらしいからそうした  
実際ウルデラでは問題なかった

そのコードはボタン入力処理の所(020017C0-020017CC)から呼び出した  
毎フレーム実行されるしレジスタにボタン入力情報が入った状態だから都合がいい
